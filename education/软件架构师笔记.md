# 软件架构师笔记

[TOC]

## 数据库系统

数据库模式、集中式分布式、数据库设计阶段、概念结构ER模型、逻辑结构设计关系模式、关系代数、规范化理论、并发控制、数据库的安全性、数据库备份和恢复、数据库性能优化

### 数据库模式

三级模式：外模式、概念模式、内模式，三层 两个映射： 逻辑独立性、物理独立性

关系的三种类型：基本关系（基本表）、查询表、视图表

视图：是个虚拟表，由查询得到的动态表、性能低、可不同角度看、安全性好、重构逻辑独立

物化视图：存储下来的视图，用于多查少更

### 分布式数据库

物理节点分布的数据库

数据独立性、分布独立性、集中和自治共享、适当增加冗余、全局一致性

有全局概念和局部概念通信管理

分布透明性：水平、垂直、混合分片、复制、位置、透明、局部映像透明

两阶段提交：表决、执行，一个撤全都撤；全同意才通过

### 数据库设计

阶段：需求分析、概念结构设计、逻辑结构设计、物理设计

需求分析：数据流图、数据字典、需求说明书

概念结构设计：ER模型

逻辑结构设计：规范化理论、关系模式

物理设计：硬件OS

#### 概念结构设计

ER图 实体联系图 实体矩形  联系菱形

两个实体间联系 ： 一对一 ； 一对多；  多对多

抽象数据，设计局部ER，合并ER，重构优化

冲突解决：属性、命名、结构冲突

#### 关系模型概念

数据模型三要素：结构、操作、约束

层次、网、面对对象、关系模型

目、度：属性个数

候选码：可唯一决定数据的元组，可多个，可组合

主码：主键

主属性：组成候选码的就是主属性，其他都是非

外键：与其他关系的主键 

完整性约束：实体完整性主属性非空、参照完整关系引用、自定义完整性、触发器

#### 逻辑结构设计

ER关系模式转换、规范化、完整性、用户视图、程序设计

一对一：两侧编入，并入一端

一对多：两侧并入，并入多端

多对多：并入两侧，独立关系

#### 关系代数

并交差、笛卡尔积、投影、选择、连接

并交差：两维表同构

笛卡尔积：X 列为两者和，行为二者乘、两两相配

投影：PI

选择：SIGMA















## 软件工程

### 提要

开发方法、开发模型、逆向工程、需求工程、系统建模、系统设计、测试评审、系统运行和维护

### 开发方法

原型法：只有需求阶段用，抛弃型、演进型，水平界面、垂直复杂算法

结构化方法：自顶向下，逐步求精，分析复杂系统、标准化、应变能力差

面向对象：自底向上，应变好，复用好

面向服务：粗粒度、松耦合、标准化构件化

形式化：数学化 可验证

统一过程UP：略

敏捷：详细讲

基于架构ABSD：进入架构篇

### 软件开发模型

增量和迭代区别：增量是模块数增加，迭代是同样的模块细化

#### 瀑布模型SDLC

结构化方法的产物、适用于需求开始就明确稳定的场景

定义阶段：如软件计划、需求分析

开发阶段：软件设计、编码、测试

维护阶段：运行维护

#### 螺旋模型

特别注意提到风险

原型为基础+瀑布=螺旋

计划-实施-风险-评估

#### V型模型

在瀑布中每步骤加测试

需求-验收、概要-系统、详细-继承、编码-单元测试

#### 构件组装模型CBSD

需求分析定义、架构设计、库建立、应用构件、测试发布

构建标准常有COBRA\EJB\COM等

#### 快速应用开发RAD

SDLC瀑布+CBSD构件=快速RAD

#### 统一过程

用例驱动、架构中心、迭代增量

初始范围、细化架构、构件产品、交付用户

### 敏捷方法

历史：无开发方法 - 传统结构化方法 - 敏捷方法

强调适应性、以人为本、增量迭代、小步快跑、适合小项目

价值观：沟通、简单、反馈、勇气

实践规则：简单设计、测试驱动、代码重构、结对、持续集成、现场客户、肖像画、系统隐喻、40小时、规范代码、集体所有

#### 其他敏捷拓展

极限编程：费用控制

水晶：最小纪律约束

开放源码：成员地域广

SCRUM：定义可重复

功能驱动FDD：分首席和类程序员

ASD 三个非线性 猜测合作学习

#### SCRUM

任务切块

### 逆向工程

实现 语法树 符号表

结构 程序依赖

功能 程序段

领域 功能之间关系



### 需求工程内容

#### 提要

需求获取、分析、UML4+1、UML图、UML关系

#### 需求工程概念

需求是用户对系统 功能、行为、性能、设计约束的期望

需求分为技术维度和管理维度

技术：获得、分析、定义、验证

管理：变更、版本、跟踪、状态跟踪

需求基线SRS 如果偏离就变更

#### 需求获取和分类

获取方法：收集资料、访谈、讨论会、书面调查、抽样调查、观摩、业务实践

分类：业务需求、用户需求、系统需求（功能、性能、设计约束）

QFD：基本需求、期望需求、兴奋需求

#### 结构化需求分析

功能模型：数据流图DFD：加工、数据存储、外部实体、数据流

行为模型：状态转换图

数据模型：ER图：实体、联系

数据字典：

#### 面向对象的概念

对象：属性、方法、ID

类：实体、边界、控制，实体类是存储体的结构信息，控制类为业务逻辑、边界类为对外接口对话框等

抽象：抽取共性

封装：隐藏内部细节

继承泛化：子类父类

多态：同一个消息发送多个对象进行不同的处理反应

接口：只有定义 无实现

消息：

组件：就是构件

模式复用：标准化

### UML

#### 概念

UML=统一建模语言

构造块、规则、公共机制

规则：范围、可见、完整、执行

公共机制：所有元素达成公式

##### 构造块

事务、关系、图

事务：结构事务（静态部分，类、接口类）行为（动作消息连接）、分组（包、组件）注释（UML解析）

####  UML

静态图：类、对象图、构件图、部署、制品、包图、组合结构图

动态图： 交互图（顺序图、通信图、交互概览、 定时图）、用例图（参与者交互关系）、状态图、活动图（流程图、并行）

#### UML 4+1

逻辑视图、实现试图、进程试图、部署试图  => 用例试图

逻辑视图：系统分析人员，关注功能需求

实现试图：系统编程实现人员，关注代码和组织、如软件管理

进程试图：系统集成人员，关注运行状态、线程、并发等，性能、吞吐量

部署视图：系统网络人员，关注软硬件部署和映射，安装、拓扑、通信

#### 面向对象分析建模

用例模型：识别参与者、合并需求、细化描述、调整用例

分析模型

#### 需求定义

严格定理法：所有需求都能预先定义

原型法：需求会演变

#### 需求验证

需求验证 - 评审、测试 - 正式评审

用户签字确认、验收标准需要涵盖需求基线SRS

#### 需求状态和跟踪

状态：需求取消、需求完成和交付

跟踪：原始的需求 - 软件需求 - 产品

根据原始需求列表和用例列表构造二维表格

#### 需求变更管理

识别问题 - 分析问题和变更描述 - 变更分析和成本计算 - 变更实现 - 修改后的需求

#### 软件系统建模

现有系统到新系统

原系统 - 物理系统 - 模型化 - 物理模型 - 抽象化 逻辑模型 

调整优化 

逻辑模型 - 实例化 - 物理模型 - 具体化 - 物理系统 -  新系统



### 系统设计

界面设计、结构化设计、面对对象设计

界面设计：三法则

结构化：

面对对象：设计模式和准则



#### 人机界面设计

三个法则

置于用户控制之下、减少用户记忆负担、保持界面一致性

#### 软件设计

体系结构设计、接口设计API、数据设计（数据结构）、过程设计

结构设计：各部件关系

接口设计：人机界面 和 API

数据数据：改善数据结构优化模块划分

过程：结构部件运行关系

#### 结构化设计

概要设计：模块外部设计，调用关系模块结构图

详细设计：模块内部设计，具体任务和处理方法

原则：高内聚低耦合、模块大小适中、多入少出、深度宽度不高

内聚：功能内聚、顺序内聚、通信内聚、过程内聚、瞬时内聚、逻辑内聚偶然内聚

耦合：非直接耦合、数据耦合、标记耦合、控制耦合、外部耦合、公共耦合、内部耦合

模块四要素：IO、处理功能、内部数据、代码、

#### 面向对象设计

分析模型、设计师、设计模式（模型）

#### 设计原则

单一职责：目的单一的类

开放封闭原则：对扩展开放

里氏替换：子类替换父类

依赖倒置：依赖抽象而非具体，针对接口编程，就是有限传入接口数据类型而非具体数据类型

接口隔离：接口职能单一

组合重用：组合比继承好

最少知道原则：一个对象对其他对象少影响

#### 模式

架构模式：CS就是架构模式，反映开发基本决策

设计模式：无关语言、关注软件系统设计

惯用法：最底层模式、特定语言的构件间关系、引用计数就是C++的惯用法

#### 设计模式

三种类型定位 、分类：创建 结构 行为、场景和特点：

分类：创建、结构、行为

场景和特点：

##### 创建模式

工厂、抽象工厂、构建器、原型、单例

工厂方法：定义对象创建接口、允许子类决定实例化哪个类、动态生产对象

抽象工厂：按系列生产对象

构建器模式：复杂对象构造，步骤 123 

原型：克隆对象

单例：单实例，只允许一个对象

##### 结构性模式

适配器：转化接口 如电源适配

桥接模式：继承树拆分，类很多的情况

组合模式：树目录结构，文件夹和文件

装饰模式：动态附加职责

外观模式：对外统一接口，操控便利性

享元模式：汉字编码，大量细粒度对象共享，大型文档中重复的字都是使同一个汉字编码

代理模式：对象之间代理，快捷方式

注：中介者：简化大量对象两两交互

##### 行为模式

职责链：传递职责，公司审批流程

命令模式：日志可撤销，ctrl+Z撤销，即时撤回

解释器模式：用于虚拟机架构 ，语法解释机制，自定义模式

迭代器：数据集，封装的数据集和各类对集合的操作方法 

中介者：略

备忘录：游戏存档，快照，代码版本

观察者：注册事件表，广播、联动、订阅

状态模式：状态变为类，状态机

策略模式：多方案切换

模板方法：写框架

访问者：数据和操作分离，操作变化大

### 软件测试

动态：计算机运行，黑白灰三种测试法，白盒可见源码，黑盒不看源码

静态：人工，桌前、审查、走查

早、不断测试，避免测试自己的程序，合理合不合理的输入检查

黑盒：等价类划分、边界值分析、错误推测、因果图

白盒：基本路径、循环覆盖、逻辑覆盖

#### 测试阶段

单元：单个模块

集成测试：接口间测试

系统测试：真实环境

确认测试：alpha，beta，和需求对比

回归测试：变更后测试

##### 集成测试策略

一次性、增量

自顶向下，被测者在上，需要桩模块，基础部分都是假的模块

自底向上，被测者在下，需要驱动模块，上方是假模块

混合模式

##### 系统测试

功能、性能、健壮等

性能：负载测试（不同压力的效率）、压力（可用极限）、强度（资源少）、容量、可靠

#### 面向对象测试

算法层（单元测试）、类层（模块测试）、模板层（类树）、系统层

#### 软件调试

定位和修正错误

蛮力法、回溯法、原因排除法

测试：找出错误、有预知结果、可实现设计测试过程

调试：修正错误、位置条件开始结果不可预计，不能描述过程和事件

#### 遗留系统处理问题：

四象限图：水平-价值 维度

低水平-低价值：淘汰

高水平-高价值：改造

高水平-低价值：集成，低价值是业务价值低，打通即可

低水平-高价值：继承

#### 新老系统转换

直接转换：无过渡，高风险

并行转换：有段时间两个同时运行

分段转换策略：折中 部分子系统不同时间地点替换

#### 数据迁移

抽取、转换、装载

工具嵌入、手工录入、

#### 系统运行维护

正确性、适应性、完善性、预防性









































